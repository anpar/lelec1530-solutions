\documentclass[frenchb]{scrartcl}

\input{lib.tex}

\titlehead{}
\subject{LELEC1530}
\title{Séance 3 - BJT: polarisation et amplificateur}
\subtitle{Solutions}
\author{\small Gaëtan \textsc{Cassiers} \and\small Antoine \textsc{Paris}}
\date{}

\begin{document}
\maketitle

\section*{Exercice 1}

Le modèle petit-signal (en négligeant $r_0$) est donné à la figure~\ref{fig:pt-signal1}.

\begin{figure}[h]
    \centering
    \subfloat[Circuit complet]{%
        \begin{tikzpicture}
            \draw (0, 0) to [R=$R_S$] (0, 2)
            (0, 4) to[cI=$g_m v_{gs}$] (0, 2)
            (0, 2) -- (1, 2) to[C=$C_S$] (1, 0) -- (0, 0)
            (0, 4) -- (2.5, 4) to[R=$R_D$] (2.5, 0) -- (1, 0)
            (2.5, 4) to[short, -o] (3, 4) node[anchor=west] {$v_{out}$}
            (-1, 4) to [short, -o] (-1.5, 4) to[open, v=$v_{gs}$] (-1.5, 2) to[short, o-] (0, 2)
            (0, 0) node[ground] {};
        \end{tikzpicture}
        \label{fig:pt-signal1-full}}
    \subfloat[Circuit dans la bande passante]{%
        \begin{circuitikz}
            \draw (0, 0) to[open] (0, 2)
            (0, 4) to[cI=$g_m v_{gs}$] (0, 2)
            (0, 2) -- (1, 2) to[short] (1, 0) -- (0, 0)
            (0, 4) -- (2.5, 4) to[R=$R_D$] (2.5, 0) -- (1, 0)
            (2.5, 4) to[short, -o] (3, 4) node[anchor=west] {$v_{out}$}
            (-1, 4) to [short, -o] (-1.5, 4) to[open, v=$v_{gs}$] (-1.5, 2) to[short, o-] (0, 2)
            (0, 0) node[ground] {};
        \end{circuitikz}
        \label{fig:pt-signal1-bp}}
    \caption{Modèle petit-signal du circuit}
    \label{fig:pt-signal1}
\end{figure}

\subsection*{Gain en bande passante}

Dans la bande passante, la fréquence suffisamment grande pour que
l'admittance $1/R_S$ soit négligeable par rapport à l'admittance
$j\omega C_S$. On peut donc simplifier le schéma petit signal pour trouver
le circuit de la figure~\ref{fig:pt-signal1-bp}.

On touve alors:
\[v_{out} = -R_D i_d = -R_D g_m v_{gs} = -R_D g_m v_{in}\]
et donc le gain vaut
\[A_v = \frac{v_{out}}{v_{in}} = -R_D g_m.\]

\subsection*{Fonction de transfert}

On se base sur la figure~\ref{fig:pt-signal1-full} pour trouver les équations du circuit:
\begin{align*}
    v_{out} &= -R_D i_d \\
    i_d &= g_m v_{gs} \\
    v_{gs} &= v_{in} - \frac{1}{\frac{1}{R_S} + sC_S} i_d \\
\end{align*}

À partir de ces équations, on trouve
\begin{align*}
    v_s &= \frac{g_m}{g_m + \frac{1}{R_S} + s C_S} v_{in} \\
    v_{out} &= -R_D g_m \left(v_{in} - v_s\right) \\
\end{align*}
et
\begin{align*}
    H(s) &= \frac{v_{out}}{v_{in}}
        = -g_m R_D\frac{1 + s C_S R_S}{1 + g_m R_S + s C_S R_S} \\
        &= -10\frac{1 + s C_S R_S}{7 + s C_S R_S}. \\
\end{align*}

\subsection*{Diagramme de Bode}

Ci-dessous le diagramme de Bode (en prenant $C_S = \SI{100}{\micro\farad}$).
\begin{center}
    \includegraphics[width=0.7\textwidth,height=0.3\textwidth]{figures/bode1.tikz}
    \includegraphics[width=0.7\textwidth,height=0.3\textwidth]{figures/bode2.tikz}
\end{center}

\subsection*{Gain DC}
En DC, $\omega = 0$:
\[H(0) = -\frac{10}{7} = -1.43\]

\section*{Exercice 2}

\subsection*{Point de polarisation}

Sachant que (en supposant que le transistor est en saturation)
\begin{align*}
    I_D &= k_n \frac{W}{L} \frac{\left(V_G - V_S - V_{T0}\right)^2}{2} \\
    V_G &= \frac{V_{DD}}{2} \\
    V_S &= R_4 I_D, \\
\end{align*}

on trouve \[\frac{W}{L} = 2.\]

On a aussi $V_{OUT} = V_{DD} - R_3 I_D = \SI{2.5}{V}$, donc $R_3 = \SI{2.5}{k\ohm}$.

Comme $V_{OV} = \SI{0.5}{V} > 0$ et $V_{DS} = \SI{1.5}{V} > V_{OV}$, le transistor
est saturé; l'équation utilisée ci-dessus est donc correct.

\subsection*{Gain et impédances d'entrée et de sortie en bande passante}
\begin{figure}[h]
    \centering
        \begin{tikzpicture}
            \draw
            (0, 4) to[cI_=$g_m v_{gs}$] (0, 2)
            (0, 0) to[V=$v_{in}$] (0, 2)
            (0, 0) node[ground] {}
            (0, 4) -- (1, 4) to[R=$r_0$] (1, 2) to [short, -*] (0, 2)
            (1, 2) to[R=$R_4$] (1, 0) -- (0, 0)
            (1, 4) -- (2.5, 4) to[R=$R_3$] (2.5, 0) -- (1, 0)
            (2.5, 4) to[short, -o] (3, 4) node[anchor=west] {$v_{out}$}
            ;
        \end{tikzpicture}
    \caption{Modèle petit-signal du circuit dans la bande passante ($v_{gs} = -v_{in}$)}
    \label{fig:pt-signal2}
\end{figure}
Sur le modèle petit-signal,
\begin{align*}
    g_m &= \frac{2I_D}{V_{OV}} = \SI{4}{mA/V} \\
    r_0 &= \frac{1}{\lambda I_D} = \SI{50}{k\ohm}.
\end{align*}

En se basant sur le schéma petit-signal (figure~\ref{fig:pt-signal2}),
trouve le gain (par exemple via un équivalent de Thévenin de la source de courant
et de $r_0$):
\[A_v = \frac{v_{out}}{v_{in}} = (1+g_m r_0) \frac{R_3}{r_0 + R_3}\]

La résistance d'entrée s'obtient en laissant la sortie en circuit ouvert.
On trouve alors
\[i_{in} = \left(\frac{1}{R_4} + \frac{1+r_0 g_m}{r_0 + R_3}\right) v_{in}\]
D'où
\[R_{in} = \frac{R_4 (r_0 + R_3)}{r_0 + R_3 + R_4 (1+r_0 g_m)}\]

La résistance de sortie s'obtient en imposant $v_{in} = 0$:
\[R_{out} = R_3 \parallelsum r_0\]

\subsection*{Bande passante}
\end{document}

